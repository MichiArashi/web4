# Database Configuration
# На сервере studs PostgreSQL обычно работает на стандартном порту 5432
# 
# ВАЖНО: Если PostgreSQL недоступен при запуске, приложение автоматически
# переключится на H2 in-memory базу (данные будут теряться при перезапуске)
#
# Для принудительного использования H2 закомментируйте PostgreSQL и раскомментируйте H2

# PostgreSQL (основная БД) - приоритетная
spring.datasource.url=jdbc:postgresql://localhost:5432/studs?ssl=false&connectTimeout=5&socketTimeout=10&loginTimeout=5
spring.datasource.username=s466944
spring.datasource.password=ETFkjSZzvPdIoEUs
spring.datasource.driver-class-name=org.postgresql.Driver

# H2 Database (fallback - раскомментируйте для принудительного использования H2)
# spring.datasource.url=jdbc:h2:mem:weblab3;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
# spring.datasource.driver-class-name=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
# Диалект будет определен автоматически в зависимости от доступной БД
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
# Включено использование метаданных JDBC для автоматического определения диалекта
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true

# H2 Console (для отладки, если используется H2)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Connection pool settings
# Уменьшены таймауты для быстрого определения недоступности PostgreSQL
spring.datasource.hikari.connection-timeout=5000
spring.datasource.hikari.maximum-pool-size=5
# Не прерывать запуск при ошибке подключения (даст время на переподключение)
spring.datasource.hikari.initialization-fail-timeout=1
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.idle-timeout=300000

# JWT Configuration
jwt.secret=mySecretKeyForJWTTokenGenerationThatIsAtLeast256BitsLongForSecurityPurposes
jwt.expiration=86400000

# Server Configuration
# Порт приложения (если занят, измените на другой свободный порт)
server.port=3000

# Static Resources
spring.web.resources.static-locations=classpath:/static/

